@model EprocurementWeb.Models.ProveedorRegistro

@{
    ViewBag.Title = @RHome.Title;
}
<link href="~/Content/validacionProveedor.css" rel="stylesheet" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<form action="/Home/Index" method="post" class="registro-form form-horizontal" id="form_fact" name="form_fact">
    @Html.AntiForgeryToken()
    <div class="row panel-header">
        <div class="col-sm-4 pull-left">
            <img class="gap-logo" src="@Url.GetImage("logo-gap-color.png",false)" />
        </div>

        <div class="col-sm-4 t-a-c ">
            <h1 class="h-title">
                @RHome.ProvP
            </h1>
        </div>

        <div class="col-sm-4">
            <ul class="pull-right" style="list-style:none; float: right;">
                <li style="display:inline;">
                    <a href="" class="setLang" data-lang="es-MX"><img src="@Url.GetImage("Mexico.png",false)" /></a>
                </li>
                <li style="display:inline;">
                    <a href="" class="setLang" data-lang="en-US"><img src="@Url.GetImage("usa.png", false)" /></a>
                </li>
            </ul>
        </div>

    </div>

    <div class="container">
        <div class="row pb-0">
            <div class="col-sm-12">
                <h3 class="subtitle">
                    @RHome.TitlePP
                </h3>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="accordion" id="accordionExample">
                    <div class="card card-border">
                        <div class="card-header" id="headingOne">
                            <span class="card-titulo">
                                Detalles de la compañía
                                <button class="btn btn-link collapsed float-right" type="button" data-toggle="collapse" data-target="#detallecompania" aria-expanded="false" aria-controls="collapseThree">
                                    <i class="fas fa-chevron-up collapse-color"></i>
                                </button>
                            </span>
                        </div>
                        <div id="detallecompania" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                            <div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("empresa", @RHome.NameOfCompany, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.NombreEmpresa, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("razonSocial", @RHome.BName, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.RazonSocial, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("rfc", @RHome.RFC, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.RFC, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("nif", @RHome.NIF, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.NIF, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("codigo", @RHome.ZipCode, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.Direccion.CodigoPostal, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("colonia", @RHome.Suburb, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.Direccion.Colonia, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("pais", @RHome.Country, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.Direccion.IdPais, new SelectList(ViewBag.PaisList, "IdPais", "Nombre"), "...", new { @class = "form-control col-md-12", @id = "PaisProveedor" })
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("estado", @RHome.State, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.Direccion.IdEstado, new SelectList(Enumerable.Empty<EPROCUREMENT.GAPPROVEEDOR.Entities.EstadoDTO>(), "IdEstado", "Nombre"), "...", new { @class = "form-control col-md-12", @id = "EstadoProveedor" })
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("direccion", @RHome.Address, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.Direccion.Calle, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("municipio", @RHome.City, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.Direccion.IdMunicipio, new SelectList(Enumerable.Empty<EPROCUREMENT.GAPPROVEEDOR.Entities.MunicipioDTO>(), "idMunicipio", "Nombre"), "...", new { @class = "form-control col-md-12", @id = "MunicipioProveedor" })
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("zonaHoraria", @RHome.TZone, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.IdZonaHoraria, new SelectList(ViewBag.ZonaHorariaList, "IdZonaHoraria", "Nombre"), "...", new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("telefono", @RHome.Phone, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.ProvTelefono, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("fax", @RHome.Fax, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.ProvFax, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("paginaWeb", @RHome.WPage, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.PaginaWeb, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("tipoProveedor", @RHome.ProvType, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.IdTipoProveedor, new SelectList(ViewBag.TipoProveedorList, "IdTipoProveedor", "Tipo"), "...", new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("axNumeroProveedor", @RHome.AXProviderNum, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.AXNumeroProveedor, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("nacionalidad", @RHome.Nacionality, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.IdNacionalidad, new SelectList(ViewBag.NacionalidadList, "IdNacionalidad", "Nombre"), "...", new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-12">
                <div class="accordion" id="accordionExample">
                    <div class="card card-border">
                        <div class="card-header" id="headingOne">
                            <span class="card-titulo">
                                Detalles del contacto
                                <button class="btn btn-link collapsed float-right" type="button" data-toggle="collapse" data-target="#detallecontacto" aria-expanded="false" aria-controls="collapseThree">
                                    <i class="fas fa-chevron-up collapse-color"></i>
                                </button>
                            </span>
                        </div>
                        <div id="detallecontacto" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                            <div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                @Html.Label("contacto", RHome.CName, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.Contacto.NombreContacto, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("cargo", RHome.Position, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.Contacto.Cargo, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("nacionalidad", RHome.Nacionality, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.Contacto.IdNacionalidad, new SelectList(ViewBag.NacionalidadList, "IdNacionalidad", "Nombre"), "...", new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("teledonoDirecto", RHome.CPhone, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.Contacto.TelefonoDirecto, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("movil", RHome.CellPhone, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.Contacto.TelefonoMovil, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("fax", RHome.Fax, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.Contacto.Fax, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("emailContacto", RHome.Email, new { @class = "label-formulario" })
                                                @Html.TextBoxFor(model => model.Contacto.Email, new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("paisContacto", RHome.Country, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.Contacto.IdPais, new SelectList(ViewBag.PaisList, "IdPais", "Nombre"), "...", new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("zonaHorariaConctacto", RHome.TZone, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.Contacto.IdZonaHoraria, new SelectList(ViewBag.ZonaHorariaList, "IdZonaHoraria", "Nombre"), "...", new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                @Html.Label("idioma", RHome.Language, new { @class = "label-formulario" })
                                                @Html.DropDownListFor(model => model.Contacto.IdIdioma, new SelectList(ViewBag.IdiomaList, "IdIdioma", "NombreIdioma"), "...", new { @class = "form-control col-md-12" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                <div class="accordion" id="accordionExample">
                    <div class="card card-border">
                        <div class="card-header" id="headingOne">
                            <span class="card-titulo">
                                Especialidades de la empresa
                                <button class="btn btn-link collapsed float-right" type="button" data-toggle="collapse" data-target="#especialidadEmpresa" aria-expanded="false" aria-controls="collapseThree">
                                    <i class="fas fa-chevron-up collapse-color"></i>
                                </button>
                            </span>
                        </div>
                        <div id="especialidadEmpresa" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                            <div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            @Html.Label("", "Marque los Aeropuertos que puede atender*", new { @class = "label-formulario" })
                                        </div>
                                        <div class="col-md-12">
                                            @for (int idx = 0; idx < Model.AeropuertoList.Count; idx++)
                                            {
                                                @Html.HiddenFor(model => model.AeropuertoList[idx].Id)
                                                @Html.HiddenFor(model => model.AeropuertoList[idx].Nombre)
                                                <div class="col-sm-4" style="font-size:12px;">
                                                    @Html.CheckBoxFor(model => model.AeropuertoList[idx].Checado)
                                                    @Html.DisplayTextFor(model => model.AeropuertoList[idx].Nombre)
                                                </div>
                                            }
                                            <hr />
                                            <span style="font-size:14px; font-weight:bold;">
                                                @Html.Label("", "Favor de seleccionar el (los) giro (s) específicos que su empresa esta calificada*", new { @class = "control-label m-b-1" })
                                            </span>

                                            @for (int idx = 0; idx < 5; idx++)
                                            {
                                                @Html.HiddenFor(model => model.ProveedorGiroList[idx].IdProveedorGiro)
                                                <div class="form-group col-md-6 ">
                                                    <div class="col-md-12">
                                                        @Html.DropDownListFor(x => x.ProveedorGiroList[idx].IdCatalogoGiro, new SelectList(ViewBag.GiroList, "IdGiro", "GiroNombre"), RHome.DefaultSelect, new { @class = "form-control" })
                                                    </div>
                                                </div>
                                            }

                                            <button class="btnStyleGray col-md-3">Agregar</button>

                                            <hr />
                                            <ul id="condiciones" class="chkCondiciones">

                                                <li class="mb-2">
                                                    <input type="checkbox" data-val="true" data-val-required="Es necesario aceptar los términos y condiciones." id="termino" name="termino" value="true" required>
                                                    He leído y acepto los
                                                    <a href="#" data-toggle="modal" data-target="#modalTerminos" class="a-c">
                                                        Términos y condiciones
                                                    </a>

                                                </li>
                                                <li>
                                                    <input type="checkbox" data-val="true" data-val-required="Es necesario aceptar el aviso de privacidad" id="avisos" name="avisos" value="true" required>
                                                    He leído y acepto el
                                                    <a href="#" data-toggle="modal" data-target="#modalAviso" class="a-c">
                                                        Aviso de privacidad

                                                    </a>
                                                </li>
                                            </ul>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row ">
            
        </div>

        <div class="row">
            <div class="col-sm-6">&nbsp;</div>
            <div class="col-sm-3">
                <button class="btnStyle btnWhite" type="submit">Cancelar</button>
            </div>
            <div class="col-sm-3">
                <button class="btnStyle" type="submit">Aceptar</button>
            </div>
        </div>
    </div>
    

    <!-- Modal -->    
    <div class="modal" id="modalTerminos">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header bg-purple">
                    <h4 class="modal-title">Términos y condiciones</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <embed src="~/Content/PDF/PruebaTerminos.pdf" frameborder="0" width="100%" height="400px">
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <div class="row">
                        <button type="button" class="btn btnStyle" data-dismiss="modal">Aceptar</button>

                    </div>

                </div>

            </div>
        </div>
    </div>
    <div class="modal" id="modalAviso">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header bg-purple">
                    <h4 class="modal-title">Aviso de privacidad</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <embed src="~/Content/PDF/PruebaAvisos.pdf" frameborder="0" width="100%" height="400px">
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <div class="row">
                        <button type="button" class="btn btnStyle" data-dismiss="modal">Aceptar</button>

                    </div>

                </div>

            </div>
        </div>
    </div>
  
</form>


<div class="row">
    <div class="col-md-12 text-center">
        <p class="text-center">
            @* <img src="@Url.GetImage("Welcome.jpg")" alt="Welcome"/>*@
        </p>

    </div>
</div>

<script type="text/javascript">

    $(document).ready(function () {
         var url = '@Url.Action("Contact", "Home")'; 
        if (window.location.hash == "#success" ){
            Swal.fire({
                position: 'middle',
                icon: 'success',
                title: '¡Envío Exitoso!',
                html: '<p class="text">Su información será validada.</p> ' +
                    '</br> <p class="text">Agradecemos su interés en formar parte de ' +
                    'nuestro padrón de proveedores. ' +
                    'Su solicitud será revisada por personal de ' +
                    'Adquisiciones. En breve recibirá la respuesta.</p></br>' +
                    '<p class="text">Atte:</p></br>' +
                    '<p class="text">Departamento de Adquisiciones, Grupo Aeroportuario del Pacífico.</p>',
                showConfirmButton: true,
                timer: 3000
            })

            //setTimeout(function(){  window.location.href = url; }, 1500);

            
            //location.hash = '#';
        }





        $("#PaisProveedor").change(function () {
            var dID = $('#PaisProveedor option:selected').val();
            $.getJSON("/Home/GetEstados", { idPais: dID },
                function (data) {
                    var select = $("#EstadoProveedor");
                    var selectMunicipio = $("#MunicipioProveedor");
                    select.empty();
                    selectMunicipio.empty();
                    select.append($('<option/>', {
                        value: 0,
                        text: "..."
                    }));
                    selectMunicipio.append($('<option/>', {
                        value: 0,
                        text: "..."
                    }));
                    $.each(data, function (index, itemData) {
                        select.append($('<option/>', {
                            value: itemData.IdEstado,
                            text: itemData.Nombre
                        }));
                    });
                });
        });

        $("#EstadoProveedor").change(function () {
            var dID = $('#EstadoProveedor option:selected').val();
            $.getJSON("/Home/GetMunicipios", { idEstado: dID },
                function (data) {
                    var select = $("#MunicipioProveedor");
                    select.empty();
                    select.append($('<option/>', {
                        value: 0,
                        text: "..."
                    }));
                    $.each(data, function (index, itemData) {
                        select.append($('<option/>', {
                            value: itemData.IdMunicipio,
                            text: itemData.Nombre
                        }));
                    });
                });
        });
        /// Cargar Paises
        //$.ajax({
        //    url: "/Home/GetPaisesList",
        //    type: "GET",
        //    contentType: "application/json; charset=utf-8",
        //    datatype: JSON,
        //    success: function (result) {
        //        $(result).each(function () {
        //            $("#pais").append($("<option></option>").val(this.IdPais).html(this.Nombre));
        //        });
        //        $(result).each(function () {
        //            $("#paisConctacto").append($("<option></option>").val(this.IdPais).html(this.Nombre));
        //        });
        //    },
        //    error: function (data) { }
        //});

        ///// Cargar Aeropuertos
        //$.ajax({
        //    url: "/Home/GetAeropuertosList",
        //    type: "GET",
        //    contentType: "application/json; charset=utf-8",
        //    datatype: JSON,
        //    success: function (result) {
        //        $.each(result, function (key, value) {
        //            var li = $('<li><input  type="checkbox" name="' + key + '" id="' + key + '"/>' +
        //                '<label for="' + key + '"></label></li>');
        //            li.find('label').text(value.GiroNombre);
        //            $('#wkslist').append(li);
        //        });
        //    },
        //    error: function (data) { }
        //});

        /// Cargar Giros
        //$.ajax({
        //    url: "/Home/GetGirosList",
        //    type: "GET",
        //    contentType: "application/json; charset=utf-8",
        //    datatype: JSON,
        //    success: function (result) {
        //        $(result).each(function () {
        //            $("#giro1").append($("<option></option>").val(this.IdGiro).html(this.GiroNombre));
        //        });
        //        $(result).each(function () {
        //            $("#giro2").append($("<option></option>").val(this.IdGiro).html(this.GiroNombre));
        //        });
        //        $(result).each(function () {
        //            $("#giro3").append($("<option></option>").val(this.IdGiro).html(this.GiroNombre));

        //        });
        //        $(result).each(function () {
        //            $("#giro4").append($("<option></option>").val(this.IdGiro).html(this.GiroNombre));
        //        });
        //        $(result).each(function () {
        //            $("#giro5").append($("<option></option>").val(this.IdGiro).html(this.GiroNombre));
        //        });
        //        //$(result).each(function () {u eres
        //        //    $("#paisConctacto").append($("<option></option>").val(this.IdPais).html(this.Nombre));
        //        //});
        //    },
        //    error: function (data) { }
        //});
        /// Cargar Giros
        //$.ajax({
        //    url: "/Home/GetZonaHorariaList",
        //    type: "GET",
        //    contentType: "application/json; charset=utf-8",
        //    datatype: JSON,
        //    success: function (result) {
        //        $(result).each(function () {
        //            $("#zonaHoraria").append($("<option></option>").val(this.IdPais).html(this.Nombre));
        //        });
        //        $(result).each(function () {
        //            $("#zonaHorariaContacto").append($("<option></option>").val(this.IdPais).html(this.Nombre));
        //        });

        //    },
        //    error: function (data) { }
        //});

        /// Cargar Nacionalidad
        //$.ajax({
        //    url: "/Home/GetNacionalidadList",
        //    type: "GET",
        //    contentType: "application/json; charset=utf-8",
        //    datatype: JSON,
        //    success: function (result) {
        //        $(result).each(function () {
        //            $("#nacionalidad").append($("<option></option>").val(this.IdPais).html(this.Nombre));
        //        });


        //    },
        //    error: function (data) { }
        //});

    });
</script>
